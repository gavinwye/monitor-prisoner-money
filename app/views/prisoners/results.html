{% extends "layout.html" %}

{% block pageTitle %}
Prisoners
{% endblock %}

{% block content %}

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <h1 class="govuk-heading-xl govuk-!-margin-bottom-6">
      Prisoners search results
    </h1>
  </div>
  <div class="govuk-grid-column-full">
    <!-- <h2 class="govuk-heading-m">Search</h2> -->
    <form class="form" method="post">
      <div class="govuk-form-group">
        <label class="govuk-label" for="width-20">
          Prisoner number or name
        </label>
        <input class="govuk-input govuk-!-width-two-thirds" id="prisonerSearch" name="prisonerSearch" type="text" value="{{ data['prisonerSearch'] }}">
        <button type="submit" class="govuk-button">
          Search
        </button>
        <p><a href="/advanced-search/" class="govuk-link">Advanced search</a></p>
      </div>
    </form>

    {%- if prisoners.length == 0 -%}
    <p class="govuk-body-l">Your search for <span class="govuk-!-font-weight-bold">"{{ data['prisonerSearch'] }}"</span> returned no results <a href="/prisons/" class="govuk-link--no-visited-state">search again</a></p>
    {%- else -%}
    <p class="govuk-body-l">Search results for <span class="govuk-!-font-weight-bold">{{ data['prisonerSearch'] }}</span> <a href="/prisons/" class="govuk-link--no-visited-state">clear search</a></p>
    <!-- ********************************** -->

    <div class="govuk-tabs" data-module="tabs">
      <h2 class="govuk-tabs__title">
        Credits & Disbursements
      </h2>

      <ul class="govuk-tabs__list">
        <li class="govuk-tabs__list-item">
          <a class="govuk-tabs__tab govuk-tabs__tab--selected" href="#credits">
            Credits
          </a>
        </li>
        <li class="govuk-tabs__list-item">
          <a class="govuk-tabs__tab" href="#disbursements">
            Disbursements
          </a>
        </li>
      </ul>

      <section class="govuk-tabs__panel" id="credits">
        <h2 class="govuk-heading-l">Credits</h2>
        <table class="govuk-table govuk-!-font-size-14 ">
          <!-- <caption class="govuk-table__caption">Credits for your prisons sorted by date</caption> -->
          {% include "prisoners/includes/_table_header_credits.html" %}
          <tbody class="govuk-table__body ">
            {%- for prisoner in prisoners -%}
              {%- if prisoner.credit_count >= 1 -%}
              <!-- The line above stops disbursements appearing in the credits view -->
                {% include "prisoners/includes/_table_row_credits.html" %}
              {%- endif -%}
            {%- endfor -%}
          </tbody>
        </table>

      </section>
      <section class="govuk-tabs__panel govuk-tabs__panel--hidden" id="disbursements">
        <h2 class="govuk-heading-l">Disbursements</h2>
        <table class="govuk-table govuk-!-font-size-14 ">
          <!-- <caption class="govuk-table__caption">Credits for your prisons sorted by date</caption> -->
          {% include "prisoners/includes/_table_header_disbursements.html" %}
          <tbody class="govuk-table__body ">
            {%- for prisoner in prisoners -%}
              {%- if prisoner.disbursement_count >= 1 -%}
              <!-- The line above stops credits appearing in the disbursements view -->
                {% include "prisoners/includes/_table_row_disbursements.html" %}
              {%- endif -%}
            {%- endfor -%}
          </tbody>
        </table>

      </section>
    </div>
    <!-- *************************************** -->

    {%- endif -%}

  </div>









</div>

{% endblock %}
